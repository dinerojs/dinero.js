{"version":3,"file":"index.production.js","sources":["../../src/checks/messages.ts","../../src/helpers/assert.ts","../../src/types/Calculator.ts","../../src/utils/equal.ts","../../src/utils/lessThan.ts","../../src/utils/absolute.ts","../../src/utils/isArray.ts","../../src/utils/computeBase.ts","../../src/utils/greaterThan.ts","../../src/utils/greaterThanOrEqual.ts","../../src/utils/getAmountAndScale.ts","../../src/utils/isScaledAmount.ts","../../src/utils/isEven.ts","../../src/utils/isHalf.ts","../../src/utils/maximum.ts","../../src/utils/sign.ts","../../src/api/haveSameCurrency.ts","../../src/divide/down.ts","../../src/divide/halfUp.ts","../../src/divide/up.ts","../../src/api/transformScale.ts","../../src/api/normalizeScale.ts","../../src/api/allocate.ts","../../src/utils/distribute.ts","../../src/api/haveSameAmount.ts","../../src/api/lessThanOrEqual.ts","../../src/utils/lessThanOrEqual.ts","../../src/api/minimum.ts","../../src/utils/minimum.ts","../../src/api/toUnits.ts","../../src/utils/getDivisors.ts","../../src/api/convert.ts","../../src/helpers/createDinero.ts","../../src/api/equal.ts","../../src/divide/halfAwayFromZero.ts","../../src/divide/halfDown.ts","../../src/divide/halfEven.ts","../../src/divide/halfOdd.ts","../../src/divide/halfTowardsZero.ts","../../src/api/hasSubUnits.ts","../../src/api/isNegative.ts","../../src/api/isPositive.ts","../../src/api/isZero.ts","../../src/api/multiply.ts","../../src/api/add.ts","../../src/api/compare.ts","../../src/utils/compare.ts","../../src/api/greaterThan.ts","../../src/api/greaterThanOrEqual.ts","../../src/api/lessThan.ts","../../src/api/maximum.ts","../../src/api/subtract.ts","../../src/api/toDecimal.ts","../../src/api/toSnapshot.ts","../../src/api/trimScale.ts","../../src/utils/countTrailingZeros.ts"],"sourcesContent":["export const INVALID_AMOUNT_MESSAGE = 'Amount is invalid.';\nexport const INVALID_SCALE_MESSAGE = 'Scale is invalid.';\nexport const INVALID_RATIOS_MESSAGE = 'Ratios are invalid.';\nexport const UNEQUAL_SCALES_MESSAGE = 'Objects must have the same scale.';\nexport const UNEQUAL_CURRENCIES_MESSAGE =\n  'Objects must have the same currency.';\nexport const NON_DECIMAL_CURRENCY_MESSAGE = 'Currency is not decimal.';\n","/**\n * Assert a condition.\n *\n * @param condition - The condition to verify.\n * @param message - The error message to throw.\n *\n * @throws If the condition isn't met.\n */\nexport function assert(condition: boolean, message: string) {\n  if (!condition) {\n    throw new Error(`[Dinero.js] ${message}`);\n  }\n}\n","import type { BinaryOperation, UnaryOperation } from '.';\n\nexport enum ComparisonOperator {\n  LT = -1,\n  EQ = 0,\n  GT = 1,\n}\n\nexport type Calculator<TInput> = {\n  readonly add: BinaryOperation<TInput>;\n  readonly compare: BinaryOperation<TInput, ComparisonOperator>;\n  readonly decrement: UnaryOperation<TInput>;\n  readonly integerDivide: BinaryOperation<TInput>;\n  readonly increment: UnaryOperation<TInput>;\n  readonly modulo: BinaryOperation<TInput>;\n  readonly multiply: BinaryOperation<TInput>;\n  readonly power: BinaryOperation<TInput>;\n  readonly subtract: BinaryOperation<TInput>;\n  readonly zero: () => TInput;\n};\n","import { ComparisonOperator } from '../types';\nimport type { Calculator } from '../types';\n\ntype EqualCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns an equal function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The equal function.\n */\nexport function equal<TAmount>(calculator: EqualCalculator<TAmount>) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return calculator.compare(subject, comparator) === ComparisonOperator.EQ;\n  };\n}\n","import { ComparisonOperator } from '../types';\nimport type { Calculator } from '../types';\n\ntype LessThanCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a lessThan function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The lessThan function.\n */\nexport function lessThan<TAmount>(calculator: LessThanCalculator<TAmount>) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return calculator.compare(subject, comparator) === ComparisonOperator.LT;\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { lessThan } from './lessThan';\n\nexport function absolute<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const lessThanFn = lessThan(calculator);\n  const zero = calculator.zero();\n\n  return (input: TAmount) => {\n    if (equalFn(input, zero)) {\n      return zero;\n    }\n\n    if (lessThanFn(input, zero)) {\n      const minusOne = calculator.decrement(zero);\n\n      return calculator.multiply(minusOne, input);\n    }\n\n    return input;\n  };\n}\n","export function isArray<TType>(\n  maybeArray: TType | readonly TType[]\n): maybeArray is readonly TType[] {\n  return Array.isArray(maybeArray);\n}\n","import type { Calculator } from '../types';\n\nimport { isArray } from './isArray';\n\nexport function computeBase<TAmount>(calculator: Calculator<TAmount>) {\n  return (base: TAmount | readonly TAmount[]) => {\n    if (isArray(base)) {\n      return base.reduce((acc, curr) => calculator.multiply(acc, curr));\n    }\n\n    return base;\n  };\n}\n","import { ComparisonOperator } from '../types';\nimport type { Calculator } from '../types';\n\ntype GreaterThanCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a greaterThan function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The greaterThan function.\n */\nexport function greaterThan<TAmount>(\n  calculator: GreaterThanCalculator<TAmount>\n) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return calculator.compare(subject, comparator) === ComparisonOperator.GT;\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { greaterThan } from './greaterThan';\n\ntype GreaterThanOrEqualCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a greaterThanOrEqual function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The greaterThanOrEqual function.\n */\nexport function greaterThanOrEqual<TAmount>(\n  calculator: GreaterThanOrEqualCalculator<TAmount>\n) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return (\n      greaterThan(calculator)(subject, comparator) ||\n      equal(calculator)(subject, comparator)\n    );\n  };\n}\n","import type { ScaledAmount } from '../types';\n\nimport { isScaledAmount } from './isScaledAmount';\n\nexport function getAmountAndScale<TAmount>(\n  value: ScaledAmount<TAmount> | TAmount,\n  zero: TAmount\n) {\n  if (isScaledAmount(value)) {\n    return { amount: value.amount, scale: value?.scale ?? zero };\n  }\n\n  return { amount: value, scale: zero };\n}\n","import type { Rate, ScaledAmount } from '../types';\n\nexport function isScaledAmount<TAmount>(\n  amount: Rate<TAmount>\n): amount is ScaledAmount<TAmount> {\n  return (amount as ScaledAmount<TAmount>)?.hasOwnProperty('amount');\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from '.';\n\nexport function isEven<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const zero = calculator.zero();\n  const two = calculator.increment(calculator.increment(zero));\n\n  return (input: TAmount) => {\n    return equalFn(calculator.modulo(input, two), zero);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal, absolute } from '.';\n\nexport function isHalf<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const absoluteFn = absolute(calculator);\n\n  return (input: TAmount, total: TAmount) => {\n    const remainder = absoluteFn(calculator.modulo(input, total));\n    const difference = calculator.subtract(total, remainder);\n\n    return equalFn(difference, remainder);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { lessThan } from './lessThan';\n\ntype MaximumCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a maximum function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The maximum function.\n */\nexport function maximum<TAmount>(calculator: MaximumCalculator<TAmount>) {\n  const lessThanFn = lessThan(calculator);\n\n  return (values: readonly TAmount[]) => {\n    return values.reduce((acc, curr) => {\n      return lessThanFn(acc, curr) ? curr : acc;\n    });\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { lessThan } from './lessThan';\n\nexport function sign<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const lessThanFn = lessThan(calculator);\n  const zero = calculator.zero();\n\n  return (input: TAmount) => {\n    if (equalFn(input, zero)) {\n      return zero;\n    }\n\n    const one = calculator.increment(zero);\n    const minusOne = calculator.decrement(zero);\n\n    return lessThanFn(input, zero) ? minusOne : one;\n  };\n}\n","import type { Dinero } from '../types';\nimport { computeBase, equal } from '../utils';\n\nexport function haveSameCurrency<TAmount>(\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n) {\n  const [firstDinero, ...otherDineros] = dineroObjects;\n  const computeBaseFn = computeBase(firstDinero.calculator);\n\n  const { currency: comparator } = firstDinero.toJSON();\n  const equalFn = equal(firstDinero.calculator);\n  const comparatorBase = computeBaseFn(comparator.base);\n\n  return otherDineros.every((d) => {\n    const { currency: subject } = d.toJSON();\n    const subjectBase = computeBaseFn(subject.base);\n\n    return (\n      subject.code === comparator.code &&\n      equalFn(subjectBase, comparatorBase) &&\n      equalFn(subject.exponent, comparator.exponent)\n    );\n  });\n}\n","import type { DivideOperation } from '..';\nimport { equal, greaterThan } from '../utils';\n\n/**\n * Divide and round down.\n *\n * Rounding down happens whenever the quotient is not an integer.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const down: DivideOperation = (amount, factor, calculator) => {\n  const greaterThanFn = greaterThan(calculator);\n  const equalFn = equal(calculator);\n\n  const zero = calculator.zero();\n  const isPositive = greaterThanFn(amount, zero);\n  const quotient = calculator.integerDivide(amount, factor);\n  const remainder = calculator.modulo(amount, factor);\n  const isInteger = equalFn(remainder, zero);\n\n  if (isPositive || isInteger) {\n    return quotient;\n  }\n\n  return calculator.decrement(quotient);\n};\n","import type { DivideOperation } from '..';\nimport { absolute, greaterThan, isHalf } from '../utils';\n\nimport { down, up } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round up.\n *\n * Rounding up happens when:\n * - The quotient is half (e.g., -1.5, 1.5).\n * - The quotient is positive and greater than half (e.g., 1.6).\n * - The quotient is negative and less than half (e.g., -1.4).\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfUp: DivideOperation = (amount, factor, calculator) => {\n  const greaterThanFn = greaterThan(calculator);\n  const isHalfFn = isHalf(calculator);\n  const absoluteFn = absolute(calculator);\n\n  const zero = calculator.zero();\n  const remainder = absoluteFn(calculator.modulo(amount, factor));\n  const difference = calculator.subtract(factor, remainder);\n  const isLessThanHalf = greaterThanFn(difference, remainder);\n  const isPositive = greaterThanFn(amount, zero);\n\n  if (\n    isHalfFn(amount, factor) ||\n    (isPositive && !isLessThanHalf) ||\n    (!isPositive && isLessThanHalf)\n  ) {\n    return up(amount, factor, calculator);\n  }\n\n  return down(amount, factor, calculator);\n};\n","import type { DivideOperation } from '..';\nimport { equal, greaterThan } from '../utils';\n\n/**\n * Divide and round up.\n *\n * Rounding up happens whenever the quotient is not an integer.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const up: DivideOperation = (amount, factor, calculator) => {\n  const greaterThanFn = greaterThan(calculator);\n  const equalFn = equal(calculator);\n\n  const zero = calculator.zero();\n  const isPositive = greaterThanFn(amount, zero);\n  const quotient = calculator.integerDivide(amount, factor);\n  const remainder = calculator.modulo(amount, factor);\n  const isInteger = equalFn(remainder, zero);\n\n  if (!isInteger && isPositive) {\n    return calculator.increment(quotient);\n  }\n\n  return quotient;\n};\n","import { down } from '../divide';\nimport type { Calculator, Dinero, DivideOperation } from '../types';\nimport { computeBase, greaterThan } from '../utils';\n\nexport type TransformScaleParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  newScale: TAmount,\n  divide?: DivideOperation\n];\n\nexport function transformScale<TAmount>(calculator: Calculator<TAmount>) {\n  const greaterThanFn = greaterThan(calculator);\n  const computeBaseFn = computeBase(calculator);\n\n  return function transformScaleFn(\n    ...[dineroObject, newScale, divide = down]: TransformScaleParams<TAmount>\n  ) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n\n    const isLarger = greaterThanFn(newScale, scale);\n    const operation = isLarger ? calculator.multiply : divide;\n    const [a, b] = isLarger ? [newScale, scale] : [scale, newScale];\n    const base = computeBaseFn(currency.base);\n\n    const factor = calculator.power(base, calculator.subtract(a, b));\n\n    return dineroObject.create({\n      amount: operation(amount, factor, calculator),\n      currency,\n      scale: newScale,\n    });\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { equal, maximum } from '../utils';\n\nimport { transformScale } from './transformScale';\n\nexport type NormalizeScaleParams<TAmount> = readonly [\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n];\n\nexport function normalizeScale<TAmount>(calculator: Calculator<TAmount>) {\n  const maximumFn = maximum(calculator);\n  const convertScaleFn = transformScale(calculator);\n  const equalFn = equal(calculator);\n\n  return function _normalizeScale(\n    ...[dineroObjects]: NormalizeScaleParams<TAmount>\n  ) {\n    const highestScale = dineroObjects.reduce((highest, current) => {\n      const { scale } = current.toJSON();\n\n      return maximumFn([highest, scale]);\n    }, calculator.zero());\n\n    return dineroObjects.map((d) => {\n      const { scale } = d.toJSON();\n\n      return !equalFn(scale, highestScale)\n        ? convertScaleFn(d, highestScale)\n        : d;\n    });\n  };\n}\n","import { INVALID_RATIOS_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero, ScaledAmount } from '../types';\nimport {\n  distribute,\n  equal,\n  getAmountAndScale,\n  greaterThan,\n  greaterThanOrEqual,\n  maximum,\n} from '../utils';\n\nimport { transformScale } from './transformScale';\n\ntype UnsafeAllocateParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  ratios: ReadonlyArray<ScaledAmount<TAmount>>\n];\n\nfunction unsafeAllocate<TAmount>(calculator: Calculator<TAmount>) {\n  return function allocate(\n    ...[dineroObject, ratios]: UnsafeAllocateParams<TAmount>\n  ) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n    const distributeFn = distribute(calculator);\n    const shares = distributeFn(\n      amount,\n      ratios.map((ratio) => ratio.amount)\n    );\n\n    return shares.map((share) => {\n      return dineroObject.create({\n        amount: share,\n        currency,\n        scale,\n      });\n    });\n  };\n}\n\nexport type AllocateParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  ratios: ReadonlyArray<ScaledAmount<TAmount> | TAmount>\n];\n\nexport function safeAllocate<TAmount>(calculator: Calculator<TAmount>) {\n  const allocateFn = unsafeAllocate(calculator);\n  const greaterThanOrEqualFn = greaterThanOrEqual(calculator);\n  const greaterThanFn = greaterThan(calculator);\n  const convertScaleFn = transformScale(calculator);\n  const maximumFn = maximum(calculator);\n  const equalFn = equal(calculator);\n  const zero = calculator.zero();\n  const ten = new Array(10).fill(null).reduce(calculator.increment, zero);\n\n  return function allocate(...[dineroObject, ratios]: AllocateParams<TAmount>) {\n    const hasRatios = ratios.length > 0;\n    const scaledRatios = ratios.map((ratio) => getAmountAndScale(ratio, zero));\n    const highestRatioScale = hasRatios\n      ? maximumFn(scaledRatios.map(({ scale }) => scale))\n      : zero;\n    const normalizedRatios = scaledRatios.map(({ amount, scale }) => {\n      const factor = equalFn(scale, highestRatioScale)\n        ? zero\n        : calculator.subtract(highestRatioScale, scale);\n\n      return {\n        amount: calculator.multiply(amount, calculator.power(ten, factor)),\n        scale,\n      };\n    });\n    const hasOnlyPositiveRatios = normalizedRatios.every(({ amount }) =>\n      greaterThanOrEqualFn(amount, zero)\n    );\n    const hasOneNonZeroRatio = normalizedRatios.some(({ amount }) =>\n      greaterThanFn(amount, zero)\n    );\n\n    const condition = hasRatios && hasOnlyPositiveRatios && hasOneNonZeroRatio;\n    assert(condition, INVALID_RATIOS_MESSAGE);\n\n    const { scale } = dineroObject.toJSON();\n    const newScale = calculator.add(scale, highestRatioScale);\n\n    return allocateFn(convertScaleFn(dineroObject, newScale), normalizedRatios);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { greaterThan } from './greaterThan';\nimport { greaterThanOrEqual } from './greaterThanOrEqual';\nimport { lessThan } from './lessThan';\n\ntype DistributeCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a distribute function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The distribute function.\n */\nexport function distribute<TAmount>(calculator: DistributeCalculator<TAmount>) {\n  return (value: TAmount, ratios: readonly TAmount[]) => {\n    const equalFn = equal(calculator);\n    const greaterThanFn = greaterThan(calculator);\n    const lessThanFn = lessThan(calculator);\n    const greaterThanOrEqualFn = greaterThanOrEqual(calculator);\n\n    const zero = calculator.zero();\n    const one = calculator.increment(zero);\n\n    const total = ratios.reduce((a, b) => calculator.add(a, b), zero);\n\n    if (equalFn(total, zero)) {\n      return ratios;\n    }\n\n    let remainder = value;\n\n    const shares = ratios.map((ratio) => {\n      const share =\n        calculator.integerDivide(calculator.multiply(value, ratio), total) ||\n        zero;\n\n      remainder = calculator.subtract(remainder, share);\n\n      return share;\n    });\n\n    const isPositive = greaterThanOrEqualFn(value, zero);\n    const compare = isPositive ? greaterThanFn : lessThanFn;\n    const amount = isPositive ? one : calculator.decrement(zero);\n\n    let i = 0;\n\n    while (compare(remainder, zero)) {\n      if (!equalFn(ratios[i], zero)) {\n        shares[i] = calculator.add(shares[i], amount);\n        remainder = calculator.subtract(remainder, amount);\n      }\n\n      i++;\n    }\n\n    return shares;\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { equal } from '../utils';\n\nimport { normalizeScale } from './normalizeScale';\n\nexport type HaveSameAmountParams<TAmount> = readonly [\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n];\n\nexport function haveSameAmount<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const equalFn = equal(calculator);\n\n  return function _haveSameAmount(\n    ...[dineroObjects]: HaveSameAmountParams<TAmount>\n  ) {\n    const [firstDinero, ...otherDineros] = normalizeFn(dineroObjects);\n    const { amount: comparatorAmount } = firstDinero.toJSON();\n\n    return otherDineros.every((d) => {\n      const { amount: subjectAmount } = d.toJSON();\n\n      return equalFn(subjectAmount, comparatorAmount);\n    });\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { lessThanOrEqual as lte } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type LessThanOrEqualParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeLessThanOrEqual<TAmount>(calculator: Calculator<TAmount>) {\n  const lessThanOrEqualFn = lte(calculator);\n\n  return function lessThanOrEqual(\n    ...[dineroObject, comparator]: LessThanOrEqualParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return lessThanOrEqualFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeLessThanOrEqual<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const lessThanOrEqualFn = unsafeLessThanOrEqual(calculator);\n\n  return function lessThanOrEqual(\n    ...[dineroObject, comparator]: LessThanOrEqualParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return lessThanOrEqualFn(subjectAmount, comparatorAmount);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { lessThan } from './lessThan';\n\ntype LessThanOrEqualCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a lessThanOrEqual function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The lessThanOrEqual function.\n */\nexport function lessThanOrEqual<TAmount>(\n  calculator: LessThanOrEqualCalculator<TAmount>\n) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return (\n      lessThan(calculator)(subject, comparator) ||\n      equal(calculator)(subject, comparator)\n    );\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { minimum as min } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type MinimumParams<TAmount> = readonly [\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n];\n\nfunction unsafeMinimum<TAmount>(calculator: Calculator<TAmount>) {\n  const minFn = min(calculator);\n\n  return function minimum(...[dineroObjects]: MinimumParams<TAmount>) {\n    const [firstDinero] = dineroObjects;\n    const { currency, scale } = firstDinero.toJSON();\n\n    const amount = minFn(\n      dineroObjects.map((subject) => {\n        const { amount: subjectAmount } = subject.toJSON();\n\n        return subjectAmount;\n      })\n    );\n\n    return firstDinero.create({\n      amount,\n      currency,\n      scale,\n    });\n  };\n}\n\nexport function safeMinimum<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const minFn = unsafeMinimum(calculator);\n\n  return function maximum(...[dineroObjects]: MinimumParams<TAmount>) {\n    const condition = haveSameCurrency(dineroObjects);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const normalizedDineroObjects = normalizeFn(dineroObjects);\n\n    return minFn(normalizedDineroObjects);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { greaterThan } from './greaterThan';\n\ntype MinimumCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a minimum function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The minimum function.\n */\nexport function minimum<TAmount>(calculator: MinimumCalculator<TAmount>) {\n  const greaterThanFn = greaterThan(calculator);\n\n  return (values: readonly TAmount[]) => {\n    return values.reduce((acc, curr) => {\n      return greaterThanFn(acc, curr) ? curr : acc;\n    });\n  };\n}\n","import type { Calculator, Dinero, Transformer } from '../types';\nimport { isArray, getDivisors } from '../utils';\n\nexport type ToUnitsParams<TAmount, TOutput> = readonly [\n  dineroObject: Dinero<TAmount>,\n  transformer?: Transformer<TAmount, TOutput, readonly TAmount[]>\n];\n\nexport function toUnits<TAmount, TOutput>(calculator: Calculator<TAmount>) {\n  const getDivisorsFn = getDivisors(calculator);\n\n  return function toUnitsFn(\n    ...[dineroObject, transformer]: ToUnitsParams<TAmount, TOutput>\n  ) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n    const { power, integerDivide, modulo } = calculator;\n\n    const bases = isArray(currency.base) ? currency.base : [currency.base];\n    const divisors = getDivisorsFn(bases.map((base) => power(base, scale)));\n    const value = divisors.reduce<readonly TAmount[]>(\n      (amounts, divisor, index) => {\n        const amountLeft = amounts[index];\n\n        const quotient = integerDivide(amountLeft, divisor);\n        const remainder = modulo(amountLeft, divisor);\n\n        return [...amounts.filter((_, i) => i !== index), quotient, remainder];\n      },\n      [amount]\n    );\n\n    if (!transformer) {\n      return value;\n    }\n\n    return transformer({ value, currency });\n  };\n}\n","import type { Calculator } from '../types';\n\nexport function getDivisors<TAmount>(calculator: Calculator<TAmount>) {\n  const { multiply } = calculator;\n\n  return (bases: readonly TAmount[]) => {\n    return bases.reduce<readonly TAmount[]>((divisors, _, i) => {\n      const divisor = bases.slice(i).reduce((acc, curr) => multiply(acc, curr));\n\n      return [...divisors, divisor];\n    }, []);\n  };\n}\n","import type { Currency } from '@dinero.js/currencies';\n\nimport type { Calculator, Dinero, Rates } from '../types';\nimport { getAmountAndScale, maximum } from '../utils';\n\nimport { transformScale } from './transformScale';\n\nexport type ConvertParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  newCurrency: Currency<TAmount>,\n  rates: Rates<TAmount>\n];\n\nexport function convert<TAmount>(calculator: Calculator<TAmount>) {\n  const convertScaleFn = transformScale(calculator);\n  const maximumFn = maximum(calculator);\n  const zero = calculator.zero();\n\n  return function convertFn(\n    ...[dineroObject, newCurrency, rates]: ConvertParams<TAmount>\n  ) {\n    const rate = rates[newCurrency.code];\n    const { amount, scale } = dineroObject.toJSON();\n    const { amount: rateAmount, scale: rateScale } = getAmountAndScale(\n      rate,\n      zero\n    );\n\n    const newScale = calculator.add(scale, rateScale);\n\n    return convertScaleFn(\n      dineroObject.create({\n        amount: calculator.multiply(amount, rateAmount),\n        currency: newCurrency,\n        scale: newScale,\n      }),\n      maximumFn([newScale, newCurrency.exponent])\n    );\n  };\n}\n","import type { Calculator, Dinero, DineroOptions, Formatter } from '../types';\n\nexport type CreateDineroOptions<TAmount> = {\n  readonly calculator: Calculator<TAmount>;\n  readonly formatter?: Formatter<TAmount>;\n  readonly onCreate?: (options: DineroOptions<TAmount>) => void;\n};\n\nexport function createDinero<TAmount>({\n  calculator,\n  onCreate,\n  formatter = {\n    toNumber: Number,\n    toString: String,\n  },\n}: CreateDineroOptions<TAmount>) {\n  return function dinero({\n    amount,\n    currency: { code, base, exponent },\n    scale = exponent,\n  }: DineroOptions<TAmount>): Dinero<TAmount> {\n    const currency = { code, base, exponent };\n\n    onCreate?.({ amount, currency, scale });\n\n    return {\n      calculator,\n      formatter,\n      create: dinero,\n      toJSON() {\n        return {\n          amount,\n          currency,\n          scale,\n        };\n      },\n    };\n  };\n}\n","import type { Calculator, Dinero } from '../types';\n\nimport { haveSameAmount } from './haveSameAmount';\nimport { haveSameCurrency } from './haveSameCurrency';\n\nexport type EqualParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nexport function equal<TAmount>(calculator: Calculator<TAmount>) {\n  return function _equal(...[dineroObject, comparator]: EqualParams<TAmount>) {\n    return (\n      haveSameAmount(calculator)([dineroObject, comparator]) &&\n      haveSameCurrency([dineroObject, comparator])\n    );\n  };\n}\n","import type { DivideOperation } from '..';\nimport { sign, isHalf, absolute } from '../utils';\n\nimport { halfUp, up } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round away from zero.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfAwayFromZero: DivideOperation = (\n  amount,\n  factor,\n  calculator\n) => {\n  const signFn = sign(calculator);\n  const isHalfFn = isHalf(calculator);\n  const absoluteFn = absolute(calculator);\n\n  if (!isHalfFn(amount, factor)) {\n    return halfUp(amount, factor, calculator);\n  }\n\n  return calculator.multiply(\n    signFn(amount),\n    up(absoluteFn(amount), factor, calculator)\n  );\n};\n","import type { DivideOperation } from '..';\nimport { isHalf } from '../utils';\n\nimport { down, halfUp } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round down.\n *\n * Rounding down happens when:\n * - The quotient is half (e.g., -1.5, 1.5).\n * - The quotient is positive and less than half (e.g., 1.4).\n * - The quotient is negative and greater than half (e.g., -1.6).\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfDown: DivideOperation = (amount, factor, calculator) => {\n  const isHalfFn = isHalf(calculator);\n\n  if (isHalfFn(amount, factor)) {\n    return down(amount, factor, calculator);\n  }\n\n  return halfUp(amount, factor, calculator);\n};\n","import type { DivideOperation } from '..';\nimport { isEven, isHalf } from '../utils';\n\nimport { halfUp } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round to the nearest even integer.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfEven: DivideOperation = (amount, factor, calculator) => {\n  const isEvenFn = isEven(calculator);\n  const isHalfFn = isHalf(calculator);\n\n  const rounded = halfUp(amount, factor, calculator);\n\n  if (!isHalfFn(amount, factor)) {\n    return rounded;\n  }\n\n  return isEvenFn(rounded) ? rounded : calculator.decrement(rounded);\n};\n","import type { DivideOperation } from '..';\nimport { isEven, isHalf } from '../utils';\n\nimport { halfUp } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round to the nearest odd integer.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfOdd: DivideOperation = (amount, factor, calculator) => {\n  const isEvenFn = isEven(calculator);\n  const isHalfFn = isHalf(calculator);\n\n  const rounded = halfUp(amount, factor, calculator);\n\n  if (!isHalfFn(amount, factor)) {\n    return rounded;\n  }\n\n  return isEvenFn(rounded) ? calculator.decrement(rounded) : rounded;\n};\n","import type { DivideOperation } from '..';\nimport { sign, isHalf, absolute } from '../utils';\n\nimport { halfUp, down } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round towards zero.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfTowardsZero: DivideOperation = (\n  amount,\n  factor,\n  calculator\n) => {\n  const signFn = sign(calculator);\n  const isHalfFn = isHalf(calculator);\n  const absoluteFn = absolute(calculator);\n\n  if (!isHalfFn(amount, factor)) {\n    return halfUp(amount, factor, calculator);\n  }\n\n  return calculator.multiply(\n    signFn(amount),\n    down(absoluteFn(amount), factor, calculator)\n  );\n};\n","import type { Calculator, Dinero } from '../types';\nimport { computeBase, equal } from '../utils';\n\nexport type HasSubUnitsParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>\n];\n\nexport function hasSubUnits<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const computeBaseFn = computeBase(calculator);\n\n  return function _hasSubUnits(...[dineroObject]: HasSubUnitsParams<TAmount>) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n    const base = computeBaseFn(currency.base);\n\n    return !equalFn(\n      calculator.modulo(amount, calculator.power(base, scale)),\n      calculator.zero()\n    );\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { lessThan } from '../utils';\n\nexport type IsNegativeParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>\n];\n\nexport function isNegative<TAmount>(calculator: Calculator<TAmount>) {\n  const lessThanFn = lessThan(calculator);\n\n  return function _isNegative(...[dineroObject]: IsNegativeParams<TAmount>) {\n    const { amount } = dineroObject.toJSON();\n\n    return lessThanFn(amount, calculator.zero());\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { greaterThan } from '../utils';\n\nexport type IsPositiveParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>\n];\n\nexport function isPositive<TAmount>(calculator: Calculator<TAmount>) {\n  const greaterThanFn = greaterThan(calculator);\n\n  return function _isPositive(...[dineroObject]: IsPositiveParams<TAmount>) {\n    const { amount } = dineroObject.toJSON();\n\n    return greaterThanFn(amount, calculator.zero());\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { equal } from '../utils';\n\nexport type IsZeroParams<TAmount> = readonly [dineroObject: Dinero<TAmount>];\n\nexport function isZero<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n\n  return function _isZero(...[dineroObject]: IsZeroParams<TAmount>) {\n    const { amount } = dineroObject.toJSON();\n\n    return equalFn(amount, calculator.zero());\n  };\n}\n","import type { Calculator, Dinero, ScaledAmount } from '../types';\nimport { getAmountAndScale } from '../utils';\n\nimport { transformScale } from './transformScale';\n\nexport type MultiplyParams<TAmount> = readonly [\n  multiplicand: Dinero<TAmount>,\n  multiplier: ScaledAmount<TAmount> | TAmount\n];\n\nexport function multiply<TAmount>(calculator: Calculator<TAmount>) {\n  const convertScaleFn = transformScale(calculator);\n  const zero = calculator.zero();\n\n  return function multiplyFn(\n    ...[multiplicand, multiplier]: MultiplyParams<TAmount>\n  ) {\n    const { amount, currency, scale } = multiplicand.toJSON();\n    const { amount: multiplierAmount, scale: multiplierScale } =\n      getAmountAndScale(multiplier, zero);\n\n    const newScale = calculator.add(scale, multiplierScale);\n\n    return convertScaleFn(\n      multiplicand.create({\n        amount: calculator.multiply(amount, multiplierAmount),\n        currency,\n        scale: newScale,\n      }),\n      newScale\n    );\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type AddParams<TAmount> = readonly [\n  augend: Dinero<TAmount>,\n  addend: Dinero<TAmount>\n];\n\nfunction unsafeAdd<TAmount>(calculator: Calculator<TAmount>) {\n  return function add(...[augend, addend]: AddParams<TAmount>) {\n    const { amount: augendAmount, currency, scale } = augend.toJSON();\n    const { amount: addendAmount } = addend.toJSON();\n\n    const amount = calculator.add(augendAmount, addendAmount);\n\n    return augend.create({\n      amount,\n      currency,\n      scale,\n    });\n  };\n}\n\nexport function safeAdd<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const addFn = unsafeAdd(calculator);\n\n  return function add(...[augend, addend]: AddParams<TAmount>) {\n    const condition = haveSameCurrency([augend, addend]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [newAugend, newAddend] = normalizeFn([augend, addend]);\n\n    return addFn(newAugend, newAddend);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { compare as cmp } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type CompareParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeCompare<TAmount>(calculator: Calculator<TAmount>) {\n  const compareFn = cmp(calculator);\n\n  return function compare(\n    ...[dineroObject, comparator]: CompareParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return compareFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeCompare<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const compareFn = unsafeCompare(calculator);\n\n  return function compare(\n    ...[dineroObject, comparator]: CompareParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return compareFn(subjectAmount, comparatorAmount);\n  };\n}\n","import type { Calculator } from '../types';\n\ntype ComparisonCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a compare function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The compare function.\n */\nexport function compare<TAmount>(calculator: ComparisonCalculator<TAmount>) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return calculator.compare(subject, comparator);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { greaterThan as gt } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type GreaterThanParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeGreaterThan<TAmount>(calculator: Calculator<TAmount>) {\n  const greaterThanFn = gt(calculator);\n\n  return function greaterThan(\n    ...[dineroObject, comparator]: GreaterThanParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return greaterThanFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeGreaterThan<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const greaterThanFn = unsafeGreaterThan(calculator);\n\n  return function greaterThan(\n    ...[dineroObject, comparator]: GreaterThanParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return greaterThanFn(subjectAmount, comparatorAmount);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { greaterThanOrEqual as gte } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type GreaterThanOrEqualParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeGreaterThanOrEqual<TAmount>(calculator: Calculator<TAmount>) {\n  const greaterThanOrEqualFn = gte(calculator);\n\n  return function greaterThanOrEqual(\n    ...[dineroObject, comparator]: GreaterThanOrEqualParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return greaterThanOrEqualFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeGreaterThanOrEqual<TAmount>(\n  calculator: Calculator<TAmount>\n) {\n  const normalizeFn = normalizeScale(calculator);\n  const greaterThanOrEqualFn = unsafeGreaterThanOrEqual(calculator);\n\n  return function greaterThanOrEqual(\n    ...[dineroObject, comparator]: GreaterThanOrEqualParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return greaterThanOrEqualFn(subjectAmount, comparatorAmount);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { lessThan as lt } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type LessThanParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeLessThan<TAmount>(calculator: Calculator<TAmount>) {\n  const lessThanFn = lt(calculator);\n\n  return function lessThan(\n    ...[dineroObject, comparator]: LessThanParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return lessThanFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeLessThan<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const lessThanFn = unsafeLessThan(calculator);\n\n  return function lessThan(\n    ...[dineroObject, comparator]: LessThanParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return lessThanFn(subjectAmount, comparatorAmount);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { maximum as max } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type MaximumParams<TAmount> = readonly [\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n];\n\nfunction unsafeMaximum<TAmount>(calculator: Calculator<TAmount>) {\n  const maxFn = max(calculator);\n\n  return function maximum(...[dineroObjects]: MaximumParams<TAmount>) {\n    const [firstDinero] = dineroObjects;\n    const { currency, scale } = firstDinero.toJSON();\n\n    const amount = maxFn(\n      dineroObjects.map((subject) => {\n        const { amount: subjectAmount } = subject.toJSON();\n\n        return subjectAmount;\n      })\n    );\n\n    return firstDinero.create({\n      amount,\n      currency,\n      scale,\n    });\n  };\n}\n\nexport function safeMaximum<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const maxFn = unsafeMaximum(calculator);\n\n  return function maximum(...[dineroObjects]: MaximumParams<TAmount>) {\n    const condition = haveSameCurrency(dineroObjects);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const normalizedDineroObjects = normalizeFn(dineroObjects);\n\n    return maxFn(normalizedDineroObjects);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type SubtractParams<TAmount> = readonly [\n  minuend: Dinero<TAmount>,\n  subtrahend: Dinero<TAmount>\n];\n\nfunction unsafeSubtract<TAmount>(calculator: Calculator<TAmount>) {\n  return function subtract(...[minuend, subtrahend]: SubtractParams<TAmount>) {\n    const { amount: minuendAmount, currency, scale } = minuend.toJSON();\n    const { amount: subtrahendAmount } = subtrahend.toJSON();\n\n    const amount = calculator.subtract(minuendAmount, subtrahendAmount);\n\n    return minuend.create({\n      amount,\n      currency,\n      scale,\n    });\n  };\n}\n\nexport function safeSubtract<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const subtractFn = unsafeSubtract(calculator);\n\n  return function subtract(...[minuend, subtrahend]: SubtractParams<TAmount>) {\n    const condition = haveSameCurrency([minuend, subtrahend]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [newMinuend, newSubtrahend] = normalizeFn([minuend, subtrahend]);\n\n    return subtractFn(newMinuend, newSubtrahend);\n  };\n}\n","import { NON_DECIMAL_CURRENCY_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero, Formatter, Transformer } from '../types';\nimport { absolute, computeBase, equal, isArray, lessThan } from '../utils';\n\nimport { toUnits } from './toUnits';\n\nexport type ToDecimalParams<TAmount, TOutput> = readonly [\n  dineroObject: Dinero<TAmount>,\n  transformer?: Transformer<TAmount, TOutput, string>\n];\n\nexport function toDecimal<TAmount, TOutput>(calculator: Calculator<TAmount>) {\n  const toUnitsFn = toUnits<TAmount, readonly TAmount[]>(calculator);\n  const computeBaseFn = computeBase(calculator);\n  const equalFn = equal(calculator);\n\n  return function toDecimalFn(\n    ...[dineroObject, transformer]: ToDecimalParams<TAmount, TOutput>\n  ) {\n    const { currency, scale } = dineroObject.toJSON();\n\n    const base = computeBaseFn(currency.base);\n    const zero = calculator.zero();\n    const ten = new Array(10).fill(null).reduce(calculator.increment, zero);\n\n    const isMultiBase = isArray(currency.base);\n    const isBaseTen = equalFn(calculator.modulo(base, ten), zero);\n    const isDecimal = !isMultiBase && isBaseTen;\n\n    assert(isDecimal, NON_DECIMAL_CURRENCY_MESSAGE);\n\n    const units = toUnitsFn(dineroObject);\n\n    const getDecimalFn = getDecimal(calculator, dineroObject.formatter);\n    const value = getDecimalFn(units, scale);\n\n    if (!transformer) {\n      return value;\n    }\n\n    return transformer({ value, currency });\n  };\n}\n\nfunction getDecimal<TAmount>(\n  calculator: Calculator<TAmount>,\n  formatter: Formatter<TAmount>\n) {\n  const absoluteFn = absolute(calculator);\n  const equalFn = equal(calculator);\n  const lessThanFn = lessThan(calculator);\n  const zero = calculator.zero();\n\n  return (units: readonly TAmount[], scale: TAmount) => {\n    const whole = formatter.toString(units[0]);\n    const fractional = formatter.toString(absoluteFn(units[1]));\n\n    const scaleNumber = formatter.toNumber(scale);\n    const decimal = `${whole}.${fractional.padStart(scaleNumber, '0')}`;\n\n    const leadsWithZero = equalFn(units[0], zero);\n    const isNegative = lessThanFn(units[1], zero);\n\n    // A leading negative zero is a special case because the `toString`\n    // formatter won't preserve its negative sign (since 0 === -0).\n    return leadsWithZero && isNegative ? `-${decimal}` : decimal;\n  };\n}\n","import type { Dinero } from '../types';\n\nexport function toSnapshot<TAmount>(dineroObject: Dinero<TAmount>) {\n  return dineroObject.toJSON();\n}\n","import type { Calculator, Dinero } from '../types';\nimport { computeBase, countTrailingZeros, equal, maximum } from '../utils';\n\nimport { transformScale } from './transformScale';\n\nexport type TrimScaleParams<TAmount> = readonly [dineroObject: Dinero<TAmount>];\n\nexport function trimScale<TAmount>(calculator: Calculator<TAmount>) {\n  const countTrailingZerosFn = countTrailingZeros(calculator);\n  const equalFn = equal(calculator);\n  const maximumFn = maximum(calculator);\n  const transformScaleFn = transformScale(calculator);\n  const computeBaseFn = computeBase(calculator);\n\n  return function trimScaleFn(...[dineroObject]: TrimScaleParams<TAmount>) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n    const base = computeBaseFn(currency.base);\n\n    const trailingZerosLength = countTrailingZerosFn(amount, base);\n    const difference = calculator.subtract(scale, trailingZerosLength);\n    const newScale = maximumFn([difference, currency.exponent]);\n\n    if (equalFn(newScale, scale)) {\n      return dineroObject;\n    }\n\n    return transformScaleFn(dineroObject, newScale);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\n\ntype CountTrailingZerosCalculator<TAmount> = Calculator<TAmount>;\n\nexport function countTrailingZeros<TAmount>(\n  calculator: CountTrailingZerosCalculator<TAmount>\n) {\n  const equalFn = equal(calculator);\n\n  return (input: TAmount, base: TAmount) => {\n    const zero = calculator.zero();\n\n    if (equalFn(zero, input)) {\n      return calculator.zero();\n    }\n\n    let i = zero;\n    let temp = input;\n\n    while (equalFn(calculator.modulo(temp, base), zero)) {\n      temp = calculator.integerDivide(temp, base);\n      i = calculator.increment(i);\n    }\n\n    return i;\n  };\n}\n"],"names":["INVALID_AMOUNT_MESSAGE","INVALID_RATIOS_MESSAGE","UNEQUAL_CURRENCIES_MESSAGE","NON_DECIMAL_CURRENCY_MESSAGE","assert","condition","message","Error","concat","ComparisonOperator","equal","calculator","subject","comparator","compare","EQ","lessThan","LT","absolute","equalFn","lessThanFn","zero","input","minusOne","decrement","multiply","isArray","maybeArray","Array","computeBase","base","reduce","acc","curr","greaterThan","GT","greaterThanOrEqual","getAmountAndScale","value","_value$scale","amount","hasOwnProperty","scale","isEven","two","increment","modulo","isHalf","absoluteFn","total","remainder","difference","subtract","maximum","values","sign","one","haveSameCurrency","dineroObjects","_dineroObjects","_toArray","firstDinero","otherDineros","_arrayLikeToArray","slice","computeBaseFn","toJSON","currency","comparatorBase","every","d","subjectBase","code","exponent","down","factor","greaterThanFn","isPositive","quotient","integerDivide","isInteger","halfUp","isHalfFn","isLessThanHalf","up","transformScale","_len","arguments","length","_ref","_key","dineroObject","newScale","_ref$","divide","_dineroObject$toJSON","isLarger","operation","_ref3","_slicedToArray","a","b","power","create","normalizeScale","maximumFn","convertScaleFn","highestScale","highest","current","map","unsafeAllocate","ratios","distributeFn","greaterThanOrEqualFn","add","shares","ratio","share","i","distribute","haveSameAmount","normalizeFn","_normalizeFn2","comparatorAmount","subjectAmount","unsafeLessThanOrEqual","lessThanOrEqualFn","lte","_dineroObjects$map2","unsafeMinimum","minFn","min","_firstDinero$toJSON","toUnits","getDivisorsFn","bases","divisors","_","divisor","_toConsumableArray","getDivisors","transformer","amounts","index","amountLeft","filter","newCurrency","rate","_getAmountAndScale","rateAmount","rateScale","onCreate","_ref$formatter","formatter","toNumber","Number","toString","String","dinero","_ref2","_ref2$currency","_ref2$scale","signFn","isEvenFn","rounded","multiplicand","multiplier","_multiplicand$toJSON","multiplierAmount","multiplierScale","addFn","augend","addend","_augend$toJSON","augendAmount","addendAmount","unsafeAdd","_len2","_key2","newAugend","newAddend","allocateFn","ten","fill","hasRatios","scaledRatios","highestRatioScale","normalizedRatios","_ref4","hasOnlyPositiveRatios","_ref5","hasOneNonZeroRatio","some","_ref6","compareFn","cmp","unsafeCompare","gt","unsafeGreaterThan","gte","unsafeGreaterThanOrEqual","lt","unsafeLessThan","maxFn","max","unsafeMaximum","normalizedDineroObjects","subtractFn","minuend","subtrahend","_minuend$toJSON","minuendAmount","subtrahendAmount","unsafeSubtract","newMinuend","newSubtrahend","toUnitsFn","isMultiBase","isBaseTen","units","getDecimalFn","whole","fractional","scaleNumber","decimal","padStart","leadsWithZero","isNegative","getDecimal","countTrailingZerosFn","temp","countTrailingZeros","transformScaleFn","trailingZerosLength"],"mappings":"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"}