{"version":3,"file":"index.development.js","sources":["../../src/checks/messages.ts","../../src/helpers/assert.ts","../../src/helpers/createDinero.ts","../../src/types/Calculator.ts","../../src/utils/equal.ts","../../src/utils/lessThan.ts","../../src/utils/absolute.ts","../../src/utils/compare.ts","../../src/utils/isArray.ts","../../src/utils/computeBase.ts","../../src/utils/countTrailingZeros.ts","../../src/utils/greaterThan.ts","../../src/utils/greaterThanOrEqual.ts","../../src/utils/distribute.ts","../../src/utils/isScaledAmount.ts","../../src/utils/getAmountAndScale.ts","../../src/utils/getDivisors.ts","../../src/utils/isEven.ts","../../src/utils/isHalf.ts","../../src/utils/lessThanOrEqual.ts","../../src/utils/maximum.ts","../../src/utils/minimum.ts","../../src/utils/sign.ts","../../src/api/haveSameCurrency.ts","../../src/divide/down.ts","../../src/divide/halfAwayFromZero.ts","../../src/divide/halfDown.ts","../../src/divide/halfEven.ts","../../src/divide/halfOdd.ts","../../src/divide/halfTowardsZero.ts","../../src/divide/halfUp.ts","../../src/divide/up.ts","../../src/api/transformScale.ts","../../src/api/normalizeScale.ts","../../src/api/add.ts","../../src/api/allocate.ts","../../src/api/compare.ts","../../src/api/convert.ts","../../src/api/haveSameAmount.ts","../../src/api/equal.ts","../../src/api/greaterThan.ts","../../src/api/greaterThanOrEqual.ts","../../src/api/hasSubUnits.ts","../../src/api/isNegative.ts","../../src/api/isPositive.ts","../../src/api/isZero.ts","../../src/api/lessThan.ts","../../src/api/lessThanOrEqual.ts","../../src/api/maximum.ts","../../src/api/minimum.ts","../../src/api/multiply.ts","../../src/api/subtract.ts","../../src/api/toUnits.ts","../../src/api/toDecimal.ts","../../src/api/toSnapshot.ts","../../src/api/trimScale.ts"],"sourcesContent":["export const INVALID_AMOUNT_MESSAGE = 'Amount is invalid.';\nexport const INVALID_SCALE_MESSAGE = 'Scale is invalid.';\nexport const INVALID_RATIOS_MESSAGE = 'Ratios are invalid.';\nexport const UNEQUAL_SCALES_MESSAGE = 'Objects must have the same scale.';\nexport const UNEQUAL_CURRENCIES_MESSAGE =\n  'Objects must have the same currency.';\nexport const NON_DECIMAL_CURRENCY_MESSAGE = 'Currency is not decimal.';\n","/**\n * Assert a condition.\n *\n * @param condition - The condition to verify.\n * @param message - The error message to throw.\n *\n * @throws If the condition isn't met.\n */\nexport function assert(condition: boolean, message: string) {\n  if (!condition) {\n    throw new Error(`[Dinero.js] ${message}`);\n  }\n}\n","import type { Calculator, Dinero, DineroOptions, Formatter } from '../types';\n\nexport type CreateDineroOptions<TAmount> = {\n  readonly calculator: Calculator<TAmount>;\n  readonly formatter?: Formatter<TAmount>;\n  readonly onCreate?: (options: DineroOptions<TAmount>) => void;\n};\n\nexport function createDinero<TAmount>({\n  calculator,\n  onCreate,\n  formatter = {\n    toNumber: Number,\n    toString: String,\n  },\n}: CreateDineroOptions<TAmount>) {\n  return function dinero({\n    amount,\n    currency: { code, base, exponent },\n    scale = exponent,\n  }: DineroOptions<TAmount>): Dinero<TAmount> {\n    const currency = { code, base, exponent };\n\n    onCreate?.({ amount, currency, scale });\n\n    return {\n      calculator,\n      formatter,\n      create: dinero,\n      toJSON() {\n        return {\n          amount,\n          currency,\n          scale,\n        };\n      },\n    };\n  };\n}\n","import type { BinaryOperation, UnaryOperation } from '.';\n\nexport enum ComparisonOperator {\n  LT = -1,\n  EQ = 0,\n  GT = 1,\n}\n\nexport type Calculator<TInput> = {\n  readonly add: BinaryOperation<TInput>;\n  readonly compare: BinaryOperation<TInput, ComparisonOperator>;\n  readonly decrement: UnaryOperation<TInput>;\n  readonly integerDivide: BinaryOperation<TInput>;\n  readonly increment: UnaryOperation<TInput>;\n  readonly modulo: BinaryOperation<TInput>;\n  readonly multiply: BinaryOperation<TInput>;\n  readonly power: BinaryOperation<TInput>;\n  readonly subtract: BinaryOperation<TInput>;\n  readonly zero: () => TInput;\n};\n","import { ComparisonOperator } from '../types';\nimport type { Calculator } from '../types';\n\ntype EqualCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns an equal function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The equal function.\n */\nexport function equal<TAmount>(calculator: EqualCalculator<TAmount>) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return calculator.compare(subject, comparator) === ComparisonOperator.EQ;\n  };\n}\n","import { ComparisonOperator } from '../types';\nimport type { Calculator } from '../types';\n\ntype LessThanCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a lessThan function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The lessThan function.\n */\nexport function lessThan<TAmount>(calculator: LessThanCalculator<TAmount>) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return calculator.compare(subject, comparator) === ComparisonOperator.LT;\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { lessThan } from './lessThan';\n\nexport function absolute<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const lessThanFn = lessThan(calculator);\n  const zero = calculator.zero();\n\n  return (input: TAmount) => {\n    if (equalFn(input, zero)) {\n      return zero;\n    }\n\n    if (lessThanFn(input, zero)) {\n      const minusOne = calculator.decrement(zero);\n\n      return calculator.multiply(minusOne, input);\n    }\n\n    return input;\n  };\n}\n","import type { Calculator } from '../types';\n\ntype ComparisonCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a compare function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The compare function.\n */\nexport function compare<TAmount>(calculator: ComparisonCalculator<TAmount>) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return calculator.compare(subject, comparator);\n  };\n}\n","export function isArray<TType>(\n  maybeArray: TType | readonly TType[]\n): maybeArray is readonly TType[] {\n  return Array.isArray(maybeArray);\n}\n","import type { Calculator } from '../types';\n\nimport { isArray } from './isArray';\n\nexport function computeBase<TAmount>(calculator: Calculator<TAmount>) {\n  return (base: TAmount | readonly TAmount[]) => {\n    if (isArray(base)) {\n      return base.reduce((acc, curr) => calculator.multiply(acc, curr));\n    }\n\n    return base;\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\n\ntype CountTrailingZerosCalculator<TAmount> = Calculator<TAmount>;\n\nexport function countTrailingZeros<TAmount>(\n  calculator: CountTrailingZerosCalculator<TAmount>\n) {\n  const equalFn = equal(calculator);\n\n  return (input: TAmount, base: TAmount) => {\n    const zero = calculator.zero();\n\n    if (equalFn(zero, input)) {\n      return calculator.zero();\n    }\n\n    let i = zero;\n    let temp = input;\n\n    while (equalFn(calculator.modulo(temp, base), zero)) {\n      temp = calculator.integerDivide(temp, base);\n      i = calculator.increment(i);\n    }\n\n    return i;\n  };\n}\n","import { ComparisonOperator } from '../types';\nimport type { Calculator } from '../types';\n\ntype GreaterThanCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a greaterThan function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The greaterThan function.\n */\nexport function greaterThan<TAmount>(\n  calculator: GreaterThanCalculator<TAmount>\n) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return calculator.compare(subject, comparator) === ComparisonOperator.GT;\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { greaterThan } from './greaterThan';\n\ntype GreaterThanOrEqualCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a greaterThanOrEqual function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The greaterThanOrEqual function.\n */\nexport function greaterThanOrEqual<TAmount>(\n  calculator: GreaterThanOrEqualCalculator<TAmount>\n) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return (\n      greaterThan(calculator)(subject, comparator) ||\n      equal(calculator)(subject, comparator)\n    );\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { greaterThan } from './greaterThan';\nimport { greaterThanOrEqual } from './greaterThanOrEqual';\nimport { lessThan } from './lessThan';\n\ntype DistributeCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a distribute function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The distribute function.\n */\nexport function distribute<TAmount>(calculator: DistributeCalculator<TAmount>) {\n  return (value: TAmount, ratios: readonly TAmount[]) => {\n    const equalFn = equal(calculator);\n    const greaterThanFn = greaterThan(calculator);\n    const lessThanFn = lessThan(calculator);\n    const greaterThanOrEqualFn = greaterThanOrEqual(calculator);\n\n    const zero = calculator.zero();\n    const one = calculator.increment(zero);\n\n    const total = ratios.reduce((a, b) => calculator.add(a, b), zero);\n\n    if (equalFn(total, zero)) {\n      return ratios;\n    }\n\n    let remainder = value;\n\n    const shares = ratios.map((ratio) => {\n      const share =\n        calculator.integerDivide(calculator.multiply(value, ratio), total) ||\n        zero;\n\n      remainder = calculator.subtract(remainder, share);\n\n      return share;\n    });\n\n    const isPositive = greaterThanOrEqualFn(value, zero);\n    const compare = isPositive ? greaterThanFn : lessThanFn;\n    const amount = isPositive ? one : calculator.decrement(zero);\n\n    let i = 0;\n\n    while (compare(remainder, zero)) {\n      if (!equalFn(ratios[i], zero)) {\n        shares[i] = calculator.add(shares[i], amount);\n        remainder = calculator.subtract(remainder, amount);\n      }\n\n      i++;\n    }\n\n    return shares;\n  };\n}\n","import type { Rate, ScaledAmount } from '../types';\n\nexport function isScaledAmount<TAmount>(\n  amount: Rate<TAmount>\n): amount is ScaledAmount<TAmount> {\n  return (amount as ScaledAmount<TAmount>)?.hasOwnProperty('amount');\n}\n","import type { ScaledAmount } from '../types';\n\nimport { isScaledAmount } from './isScaledAmount';\n\nexport function getAmountAndScale<TAmount>(\n  value: ScaledAmount<TAmount> | TAmount,\n  zero: TAmount\n) {\n  if (isScaledAmount(value)) {\n    return { amount: value.amount, scale: value?.scale ?? zero };\n  }\n\n  return { amount: value, scale: zero };\n}\n","import type { Calculator } from '../types';\n\nexport function getDivisors<TAmount>(calculator: Calculator<TAmount>) {\n  const { multiply } = calculator;\n\n  return (bases: readonly TAmount[]) => {\n    return bases.reduce<readonly TAmount[]>((divisors, _, i) => {\n      const divisor = bases.slice(i).reduce((acc, curr) => multiply(acc, curr));\n\n      return [...divisors, divisor];\n    }, []);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from '.';\n\nexport function isEven<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const zero = calculator.zero();\n  const two = calculator.increment(calculator.increment(zero));\n\n  return (input: TAmount) => {\n    return equalFn(calculator.modulo(input, two), zero);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal, absolute } from '.';\n\nexport function isHalf<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const absoluteFn = absolute(calculator);\n\n  return (input: TAmount, total: TAmount) => {\n    const remainder = absoluteFn(calculator.modulo(input, total));\n    const difference = calculator.subtract(total, remainder);\n\n    return equalFn(difference, remainder);\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { lessThan } from './lessThan';\n\ntype LessThanOrEqualCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a lessThanOrEqual function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The lessThanOrEqual function.\n */\nexport function lessThanOrEqual<TAmount>(\n  calculator: LessThanOrEqualCalculator<TAmount>\n) {\n  return (subject: TAmount, comparator: TAmount) => {\n    return (\n      lessThan(calculator)(subject, comparator) ||\n      equal(calculator)(subject, comparator)\n    );\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { lessThan } from './lessThan';\n\ntype MaximumCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a maximum function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The maximum function.\n */\nexport function maximum<TAmount>(calculator: MaximumCalculator<TAmount>) {\n  const lessThanFn = lessThan(calculator);\n\n  return (values: readonly TAmount[]) => {\n    return values.reduce((acc, curr) => {\n      return lessThanFn(acc, curr) ? curr : acc;\n    });\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { greaterThan } from './greaterThan';\n\ntype MinimumCalculator<TAmount> = Calculator<TAmount>;\n\n/**\n * Returns a minimum function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The minimum function.\n */\nexport function minimum<TAmount>(calculator: MinimumCalculator<TAmount>) {\n  const greaterThanFn = greaterThan(calculator);\n\n  return (values: readonly TAmount[]) => {\n    return values.reduce((acc, curr) => {\n      return greaterThanFn(acc, curr) ? curr : acc;\n    });\n  };\n}\n","import type { Calculator } from '../types';\n\nimport { equal } from './equal';\nimport { lessThan } from './lessThan';\n\nexport function sign<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const lessThanFn = lessThan(calculator);\n  const zero = calculator.zero();\n\n  return (input: TAmount) => {\n    if (equalFn(input, zero)) {\n      return zero;\n    }\n\n    const one = calculator.increment(zero);\n    const minusOne = calculator.decrement(zero);\n\n    return lessThanFn(input, zero) ? minusOne : one;\n  };\n}\n","import type { Dinero } from '../types';\nimport { computeBase, equal } from '../utils';\n\nexport function haveSameCurrency<TAmount>(\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n) {\n  const [firstDinero, ...otherDineros] = dineroObjects;\n  const computeBaseFn = computeBase(firstDinero.calculator);\n\n  const { currency: comparator } = firstDinero.toJSON();\n  const equalFn = equal(firstDinero.calculator);\n  const comparatorBase = computeBaseFn(comparator.base);\n\n  return otherDineros.every((d) => {\n    const { currency: subject } = d.toJSON();\n    const subjectBase = computeBaseFn(subject.base);\n\n    return (\n      subject.code === comparator.code &&\n      equalFn(subjectBase, comparatorBase) &&\n      equalFn(subject.exponent, comparator.exponent)\n    );\n  });\n}\n","import type { DivideOperation } from '..';\nimport { equal, greaterThan } from '../utils';\n\n/**\n * Divide and round down.\n *\n * Rounding down happens whenever the quotient is not an integer.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const down: DivideOperation = (amount, factor, calculator) => {\n  const greaterThanFn = greaterThan(calculator);\n  const equalFn = equal(calculator);\n\n  const zero = calculator.zero();\n  const isPositive = greaterThanFn(amount, zero);\n  const quotient = calculator.integerDivide(amount, factor);\n  const remainder = calculator.modulo(amount, factor);\n  const isInteger = equalFn(remainder, zero);\n\n  if (isPositive || isInteger) {\n    return quotient;\n  }\n\n  return calculator.decrement(quotient);\n};\n","import type { DivideOperation } from '..';\nimport { sign, isHalf, absolute } from '../utils';\n\nimport { halfUp, up } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round away from zero.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfAwayFromZero: DivideOperation = (\n  amount,\n  factor,\n  calculator\n) => {\n  const signFn = sign(calculator);\n  const isHalfFn = isHalf(calculator);\n  const absoluteFn = absolute(calculator);\n\n  if (!isHalfFn(amount, factor)) {\n    return halfUp(amount, factor, calculator);\n  }\n\n  return calculator.multiply(\n    signFn(amount),\n    up(absoluteFn(amount), factor, calculator)\n  );\n};\n","import type { DivideOperation } from '..';\nimport { isHalf } from '../utils';\n\nimport { down, halfUp } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round down.\n *\n * Rounding down happens when:\n * - The quotient is half (e.g., -1.5, 1.5).\n * - The quotient is positive and less than half (e.g., 1.4).\n * - The quotient is negative and greater than half (e.g., -1.6).\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfDown: DivideOperation = (amount, factor, calculator) => {\n  const isHalfFn = isHalf(calculator);\n\n  if (isHalfFn(amount, factor)) {\n    return down(amount, factor, calculator);\n  }\n\n  return halfUp(amount, factor, calculator);\n};\n","import type { DivideOperation } from '..';\nimport { isEven, isHalf } from '../utils';\n\nimport { halfUp } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round to the nearest even integer.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfEven: DivideOperation = (amount, factor, calculator) => {\n  const isEvenFn = isEven(calculator);\n  const isHalfFn = isHalf(calculator);\n\n  const rounded = halfUp(amount, factor, calculator);\n\n  if (!isHalfFn(amount, factor)) {\n    return rounded;\n  }\n\n  return isEvenFn(rounded) ? rounded : calculator.decrement(rounded);\n};\n","import type { DivideOperation } from '..';\nimport { isEven, isHalf } from '../utils';\n\nimport { halfUp } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round to the nearest odd integer.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfOdd: DivideOperation = (amount, factor, calculator) => {\n  const isEvenFn = isEven(calculator);\n  const isHalfFn = isHalf(calculator);\n\n  const rounded = halfUp(amount, factor, calculator);\n\n  if (!isHalfFn(amount, factor)) {\n    return rounded;\n  }\n\n  return isEvenFn(rounded) ? calculator.decrement(rounded) : rounded;\n};\n","import type { DivideOperation } from '..';\nimport { sign, isHalf, absolute } from '../utils';\n\nimport { halfUp, down } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round towards zero.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfTowardsZero: DivideOperation = (\n  amount,\n  factor,\n  calculator\n) => {\n  const signFn = sign(calculator);\n  const isHalfFn = isHalf(calculator);\n  const absoluteFn = absolute(calculator);\n\n  if (!isHalfFn(amount, factor)) {\n    return halfUp(amount, factor, calculator);\n  }\n\n  return calculator.multiply(\n    signFn(amount),\n    down(absoluteFn(amount), factor, calculator)\n  );\n};\n","import type { DivideOperation } from '..';\nimport { absolute, greaterThan, isHalf } from '../utils';\n\nimport { down, up } from '.';\n\n/**\n * Divide and round towards \"nearest neighbor\" unless both neighbors are\n * equidistant, in which case round up.\n *\n * Rounding up happens when:\n * - The quotient is half (e.g., -1.5, 1.5).\n * - The quotient is positive and greater than half (e.g., 1.6).\n * - The quotient is negative and less than half (e.g., -1.4).\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const halfUp: DivideOperation = (amount, factor, calculator) => {\n  const greaterThanFn = greaterThan(calculator);\n  const isHalfFn = isHalf(calculator);\n  const absoluteFn = absolute(calculator);\n\n  const zero = calculator.zero();\n  const remainder = absoluteFn(calculator.modulo(amount, factor));\n  const difference = calculator.subtract(factor, remainder);\n  const isLessThanHalf = greaterThanFn(difference, remainder);\n  const isPositive = greaterThanFn(amount, zero);\n\n  if (\n    isHalfFn(amount, factor) ||\n    (isPositive && !isLessThanHalf) ||\n    (!isPositive && isLessThanHalf)\n  ) {\n    return up(amount, factor, calculator);\n  }\n\n  return down(amount, factor, calculator);\n};\n","import type { DivideOperation } from '..';\nimport { equal, greaterThan } from '../utils';\n\n/**\n * Divide and round up.\n *\n * Rounding up happens whenever the quotient is not an integer.\n *\n * @param amount - The amount to divide.\n * @param factor - The factor to divide by.\n * @param calculator - The calculator to use.\n *\n * @returns The rounded amount.\n */\nexport const up: DivideOperation = (amount, factor, calculator) => {\n  const greaterThanFn = greaterThan(calculator);\n  const equalFn = equal(calculator);\n\n  const zero = calculator.zero();\n  const isPositive = greaterThanFn(amount, zero);\n  const quotient = calculator.integerDivide(amount, factor);\n  const remainder = calculator.modulo(amount, factor);\n  const isInteger = equalFn(remainder, zero);\n\n  if (!isInteger && isPositive) {\n    return calculator.increment(quotient);\n  }\n\n  return quotient;\n};\n","import { down } from '../divide';\nimport type { Calculator, Dinero, DivideOperation } from '../types';\nimport { computeBase, greaterThan } from '../utils';\n\nexport type TransformScaleParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  newScale: TAmount,\n  divide?: DivideOperation\n];\n\nexport function transformScale<TAmount>(calculator: Calculator<TAmount>) {\n  const greaterThanFn = greaterThan(calculator);\n  const computeBaseFn = computeBase(calculator);\n\n  return function transformScaleFn(\n    ...[dineroObject, newScale, divide = down]: TransformScaleParams<TAmount>\n  ) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n\n    const isLarger = greaterThanFn(newScale, scale);\n    const operation = isLarger ? calculator.multiply : divide;\n    const [a, b] = isLarger ? [newScale, scale] : [scale, newScale];\n    const base = computeBaseFn(currency.base);\n\n    const factor = calculator.power(base, calculator.subtract(a, b));\n\n    return dineroObject.create({\n      amount: operation(amount, factor, calculator),\n      currency,\n      scale: newScale,\n    });\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { equal, maximum } from '../utils';\n\nimport { transformScale } from './transformScale';\n\nexport type NormalizeScaleParams<TAmount> = readonly [\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n];\n\nexport function normalizeScale<TAmount>(calculator: Calculator<TAmount>) {\n  const maximumFn = maximum(calculator);\n  const convertScaleFn = transformScale(calculator);\n  const equalFn = equal(calculator);\n\n  return function _normalizeScale(\n    ...[dineroObjects]: NormalizeScaleParams<TAmount>\n  ) {\n    const highestScale = dineroObjects.reduce((highest, current) => {\n      const { scale } = current.toJSON();\n\n      return maximumFn([highest, scale]);\n    }, calculator.zero());\n\n    return dineroObjects.map((d) => {\n      const { scale } = d.toJSON();\n\n      return !equalFn(scale, highestScale)\n        ? convertScaleFn(d, highestScale)\n        : d;\n    });\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type AddParams<TAmount> = readonly [\n  augend: Dinero<TAmount>,\n  addend: Dinero<TAmount>\n];\n\nfunction unsafeAdd<TAmount>(calculator: Calculator<TAmount>) {\n  return function add(...[augend, addend]: AddParams<TAmount>) {\n    const { amount: augendAmount, currency, scale } = augend.toJSON();\n    const { amount: addendAmount } = addend.toJSON();\n\n    const amount = calculator.add(augendAmount, addendAmount);\n\n    return augend.create({\n      amount,\n      currency,\n      scale,\n    });\n  };\n}\n\nexport function safeAdd<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const addFn = unsafeAdd(calculator);\n\n  return function add(...[augend, addend]: AddParams<TAmount>) {\n    const condition = haveSameCurrency([augend, addend]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [newAugend, newAddend] = normalizeFn([augend, addend]);\n\n    return addFn(newAugend, newAddend);\n  };\n}\n","import { INVALID_RATIOS_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero, ScaledAmount } from '../types';\nimport {\n  distribute,\n  equal,\n  getAmountAndScale,\n  greaterThan,\n  greaterThanOrEqual,\n  maximum,\n} from '../utils';\n\nimport { transformScale } from './transformScale';\n\ntype UnsafeAllocateParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  ratios: ReadonlyArray<ScaledAmount<TAmount>>\n];\n\nfunction unsafeAllocate<TAmount>(calculator: Calculator<TAmount>) {\n  return function allocate(\n    ...[dineroObject, ratios]: UnsafeAllocateParams<TAmount>\n  ) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n    const distributeFn = distribute(calculator);\n    const shares = distributeFn(\n      amount,\n      ratios.map((ratio) => ratio.amount)\n    );\n\n    return shares.map((share) => {\n      return dineroObject.create({\n        amount: share,\n        currency,\n        scale,\n      });\n    });\n  };\n}\n\nexport type AllocateParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  ratios: ReadonlyArray<ScaledAmount<TAmount> | TAmount>\n];\n\nexport function safeAllocate<TAmount>(calculator: Calculator<TAmount>) {\n  const allocateFn = unsafeAllocate(calculator);\n  const greaterThanOrEqualFn = greaterThanOrEqual(calculator);\n  const greaterThanFn = greaterThan(calculator);\n  const convertScaleFn = transformScale(calculator);\n  const maximumFn = maximum(calculator);\n  const equalFn = equal(calculator);\n  const zero = calculator.zero();\n  const ten = new Array(10).fill(null).reduce(calculator.increment, zero);\n\n  return function allocate(...[dineroObject, ratios]: AllocateParams<TAmount>) {\n    const hasRatios = ratios.length > 0;\n    const scaledRatios = ratios.map((ratio) => getAmountAndScale(ratio, zero));\n    const highestRatioScale = hasRatios\n      ? maximumFn(scaledRatios.map(({ scale }) => scale))\n      : zero;\n    const normalizedRatios = scaledRatios.map(({ amount, scale }) => {\n      const factor = equalFn(scale, highestRatioScale)\n        ? zero\n        : calculator.subtract(highestRatioScale, scale);\n\n      return {\n        amount: calculator.multiply(amount, calculator.power(ten, factor)),\n        scale,\n      };\n    });\n    const hasOnlyPositiveRatios = normalizedRatios.every(({ amount }) =>\n      greaterThanOrEqualFn(amount, zero)\n    );\n    const hasOneNonZeroRatio = normalizedRatios.some(({ amount }) =>\n      greaterThanFn(amount, zero)\n    );\n\n    const condition = hasRatios && hasOnlyPositiveRatios && hasOneNonZeroRatio;\n    assert(condition, INVALID_RATIOS_MESSAGE);\n\n    const { scale } = dineroObject.toJSON();\n    const newScale = calculator.add(scale, highestRatioScale);\n\n    return allocateFn(convertScaleFn(dineroObject, newScale), normalizedRatios);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { compare as cmp } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type CompareParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeCompare<TAmount>(calculator: Calculator<TAmount>) {\n  const compareFn = cmp(calculator);\n\n  return function compare(\n    ...[dineroObject, comparator]: CompareParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return compareFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeCompare<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const compareFn = unsafeCompare(calculator);\n\n  return function compare(\n    ...[dineroObject, comparator]: CompareParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return compareFn(subjectAmount, comparatorAmount);\n  };\n}\n","import type { Currency } from '@dinero.js/currencies';\n\nimport type { Calculator, Dinero, Rates } from '../types';\nimport { getAmountAndScale, maximum } from '../utils';\n\nimport { transformScale } from './transformScale';\n\nexport type ConvertParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  newCurrency: Currency<TAmount>,\n  rates: Rates<TAmount>\n];\n\nexport function convert<TAmount>(calculator: Calculator<TAmount>) {\n  const convertScaleFn = transformScale(calculator);\n  const maximumFn = maximum(calculator);\n  const zero = calculator.zero();\n\n  return function convertFn(\n    ...[dineroObject, newCurrency, rates]: ConvertParams<TAmount>\n  ) {\n    const rate = rates[newCurrency.code];\n    const { amount, scale } = dineroObject.toJSON();\n    const { amount: rateAmount, scale: rateScale } = getAmountAndScale(\n      rate,\n      zero\n    );\n\n    const newScale = calculator.add(scale, rateScale);\n\n    return convertScaleFn(\n      dineroObject.create({\n        amount: calculator.multiply(amount, rateAmount),\n        currency: newCurrency,\n        scale: newScale,\n      }),\n      maximumFn([newScale, newCurrency.exponent])\n    );\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { equal } from '../utils';\n\nimport { normalizeScale } from './normalizeScale';\n\nexport type HaveSameAmountParams<TAmount> = readonly [\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n];\n\nexport function haveSameAmount<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const equalFn = equal(calculator);\n\n  return function _haveSameAmount(\n    ...[dineroObjects]: HaveSameAmountParams<TAmount>\n  ) {\n    const [firstDinero, ...otherDineros] = normalizeFn(dineroObjects);\n    const { amount: comparatorAmount } = firstDinero.toJSON();\n\n    return otherDineros.every((d) => {\n      const { amount: subjectAmount } = d.toJSON();\n\n      return equalFn(subjectAmount, comparatorAmount);\n    });\n  };\n}\n","import type { Calculator, Dinero } from '../types';\n\nimport { haveSameAmount } from './haveSameAmount';\nimport { haveSameCurrency } from './haveSameCurrency';\n\nexport type EqualParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nexport function equal<TAmount>(calculator: Calculator<TAmount>) {\n  return function _equal(...[dineroObject, comparator]: EqualParams<TAmount>) {\n    return (\n      haveSameAmount(calculator)([dineroObject, comparator]) &&\n      haveSameCurrency([dineroObject, comparator])\n    );\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { greaterThan as gt } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type GreaterThanParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeGreaterThan<TAmount>(calculator: Calculator<TAmount>) {\n  const greaterThanFn = gt(calculator);\n\n  return function greaterThan(\n    ...[dineroObject, comparator]: GreaterThanParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return greaterThanFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeGreaterThan<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const greaterThanFn = unsafeGreaterThan(calculator);\n\n  return function greaterThan(\n    ...[dineroObject, comparator]: GreaterThanParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return greaterThanFn(subjectAmount, comparatorAmount);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { greaterThanOrEqual as gte } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type GreaterThanOrEqualParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeGreaterThanOrEqual<TAmount>(calculator: Calculator<TAmount>) {\n  const greaterThanOrEqualFn = gte(calculator);\n\n  return function greaterThanOrEqual(\n    ...[dineroObject, comparator]: GreaterThanOrEqualParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return greaterThanOrEqualFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeGreaterThanOrEqual<TAmount>(\n  calculator: Calculator<TAmount>\n) {\n  const normalizeFn = normalizeScale(calculator);\n  const greaterThanOrEqualFn = unsafeGreaterThanOrEqual(calculator);\n\n  return function greaterThanOrEqual(\n    ...[dineroObject, comparator]: GreaterThanOrEqualParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return greaterThanOrEqualFn(subjectAmount, comparatorAmount);\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { computeBase, equal } from '../utils';\n\nexport type HasSubUnitsParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>\n];\n\nexport function hasSubUnits<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n  const computeBaseFn = computeBase(calculator);\n\n  return function _hasSubUnits(...[dineroObject]: HasSubUnitsParams<TAmount>) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n    const base = computeBaseFn(currency.base);\n\n    return !equalFn(\n      calculator.modulo(amount, calculator.power(base, scale)),\n      calculator.zero()\n    );\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { lessThan } from '../utils';\n\nexport type IsNegativeParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>\n];\n\nexport function isNegative<TAmount>(calculator: Calculator<TAmount>) {\n  const lessThanFn = lessThan(calculator);\n\n  return function _isNegative(...[dineroObject]: IsNegativeParams<TAmount>) {\n    const { amount } = dineroObject.toJSON();\n\n    return lessThanFn(amount, calculator.zero());\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { greaterThan } from '../utils';\n\nexport type IsPositiveParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>\n];\n\nexport function isPositive<TAmount>(calculator: Calculator<TAmount>) {\n  const greaterThanFn = greaterThan(calculator);\n\n  return function _isPositive(...[dineroObject]: IsPositiveParams<TAmount>) {\n    const { amount } = dineroObject.toJSON();\n\n    return greaterThanFn(amount, calculator.zero());\n  };\n}\n","import type { Calculator, Dinero } from '../types';\nimport { equal } from '../utils';\n\nexport type IsZeroParams<TAmount> = readonly [dineroObject: Dinero<TAmount>];\n\nexport function isZero<TAmount>(calculator: Calculator<TAmount>) {\n  const equalFn = equal(calculator);\n\n  return function _isZero(...[dineroObject]: IsZeroParams<TAmount>) {\n    const { amount } = dineroObject.toJSON();\n\n    return equalFn(amount, calculator.zero());\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { lessThan as lt } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type LessThanParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeLessThan<TAmount>(calculator: Calculator<TAmount>) {\n  const lessThanFn = lt(calculator);\n\n  return function lessThan(\n    ...[dineroObject, comparator]: LessThanParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return lessThanFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeLessThan<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const lessThanFn = unsafeLessThan(calculator);\n\n  return function lessThan(\n    ...[dineroObject, comparator]: LessThanParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return lessThanFn(subjectAmount, comparatorAmount);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { lessThanOrEqual as lte } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type LessThanOrEqualParams<TAmount> = readonly [\n  dineroObject: Dinero<TAmount>,\n  comparator: Dinero<TAmount>\n];\n\nfunction unsafeLessThanOrEqual<TAmount>(calculator: Calculator<TAmount>) {\n  const lessThanOrEqualFn = lte(calculator);\n\n  return function lessThanOrEqual(\n    ...[dineroObject, comparator]: LessThanOrEqualParams<TAmount>\n  ) {\n    const dineroObjects = [dineroObject, comparator];\n\n    const [subjectAmount, comparatorAmount] = dineroObjects.map((d) => {\n      const { amount } = d.toJSON();\n\n      return amount;\n    });\n\n    return lessThanOrEqualFn(subjectAmount, comparatorAmount);\n  };\n}\n\nexport function safeLessThanOrEqual<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const lessThanOrEqualFn = unsafeLessThanOrEqual(calculator);\n\n  return function lessThanOrEqual(\n    ...[dineroObject, comparator]: LessThanOrEqualParams<TAmount>\n  ) {\n    const condition = haveSameCurrency([dineroObject, comparator]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [subjectAmount, comparatorAmount] = normalizeFn([\n      dineroObject,\n      comparator,\n    ]);\n\n    return lessThanOrEqualFn(subjectAmount, comparatorAmount);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { maximum as max } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type MaximumParams<TAmount> = readonly [\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n];\n\nfunction unsafeMaximum<TAmount>(calculator: Calculator<TAmount>) {\n  const maxFn = max(calculator);\n\n  return function maximum(...[dineroObjects]: MaximumParams<TAmount>) {\n    const [firstDinero] = dineroObjects;\n    const { currency, scale } = firstDinero.toJSON();\n\n    const amount = maxFn(\n      dineroObjects.map((subject) => {\n        const { amount: subjectAmount } = subject.toJSON();\n\n        return subjectAmount;\n      })\n    );\n\n    return firstDinero.create({\n      amount,\n      currency,\n      scale,\n    });\n  };\n}\n\nexport function safeMaximum<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const maxFn = unsafeMaximum(calculator);\n\n  return function maximum(...[dineroObjects]: MaximumParams<TAmount>) {\n    const condition = haveSameCurrency(dineroObjects);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const normalizedDineroObjects = normalizeFn(dineroObjects);\n\n    return maxFn(normalizedDineroObjects);\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\nimport { minimum as min } from '../utils';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type MinimumParams<TAmount> = readonly [\n  dineroObjects: ReadonlyArray<Dinero<TAmount>>\n];\n\nfunction unsafeMinimum<TAmount>(calculator: Calculator<TAmount>) {\n  const minFn = min(calculator);\n\n  return function minimum(...[dineroObjects]: MinimumParams<TAmount>) {\n    const [firstDinero] = dineroObjects;\n    const { currency, scale } = firstDinero.toJSON();\n\n    const amount = minFn(\n      dineroObjects.map((subject) => {\n        const { amount: subjectAmount } = subject.toJSON();\n\n        return subjectAmount;\n      })\n    );\n\n    return firstDinero.create({\n      amount,\n      currency,\n      scale,\n    });\n  };\n}\n\nexport function safeMinimum<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const minFn = unsafeMinimum(calculator);\n\n  return function maximum(...[dineroObjects]: MinimumParams<TAmount>) {\n    const condition = haveSameCurrency(dineroObjects);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const normalizedDineroObjects = normalizeFn(dineroObjects);\n\n    return minFn(normalizedDineroObjects);\n  };\n}\n","import type { Calculator, Dinero, ScaledAmount } from '../types';\nimport { getAmountAndScale } from '../utils';\n\nimport { transformScale } from './transformScale';\n\nexport type MultiplyParams<TAmount> = readonly [\n  multiplicand: Dinero<TAmount>,\n  multiplier: ScaledAmount<TAmount> | TAmount\n];\n\nexport function multiply<TAmount>(calculator: Calculator<TAmount>) {\n  const convertScaleFn = transformScale(calculator);\n  const zero = calculator.zero();\n\n  return function multiplyFn(\n    ...[multiplicand, multiplier]: MultiplyParams<TAmount>\n  ) {\n    const { amount, currency, scale } = multiplicand.toJSON();\n    const { amount: multiplierAmount, scale: multiplierScale } =\n      getAmountAndScale(multiplier, zero);\n\n    const newScale = calculator.add(scale, multiplierScale);\n\n    return convertScaleFn(\n      multiplicand.create({\n        amount: calculator.multiply(amount, multiplierAmount),\n        currency,\n        scale: newScale,\n      }),\n      newScale\n    );\n  };\n}\n","import { UNEQUAL_CURRENCIES_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero } from '../types';\n\nimport { haveSameCurrency } from './haveSameCurrency';\nimport { normalizeScale } from './normalizeScale';\n\nexport type SubtractParams<TAmount> = readonly [\n  minuend: Dinero<TAmount>,\n  subtrahend: Dinero<TAmount>\n];\n\nfunction unsafeSubtract<TAmount>(calculator: Calculator<TAmount>) {\n  return function subtract(...[minuend, subtrahend]: SubtractParams<TAmount>) {\n    const { amount: minuendAmount, currency, scale } = minuend.toJSON();\n    const { amount: subtrahendAmount } = subtrahend.toJSON();\n\n    const amount = calculator.subtract(minuendAmount, subtrahendAmount);\n\n    return minuend.create({\n      amount,\n      currency,\n      scale,\n    });\n  };\n}\n\nexport function safeSubtract<TAmount>(calculator: Calculator<TAmount>) {\n  const normalizeFn = normalizeScale(calculator);\n  const subtractFn = unsafeSubtract(calculator);\n\n  return function subtract(...[minuend, subtrahend]: SubtractParams<TAmount>) {\n    const condition = haveSameCurrency([minuend, subtrahend]);\n    assert(condition, UNEQUAL_CURRENCIES_MESSAGE);\n\n    const [newMinuend, newSubtrahend] = normalizeFn([minuend, subtrahend]);\n\n    return subtractFn(newMinuend, newSubtrahend);\n  };\n}\n","import type { Calculator, Dinero, Transformer } from '../types';\nimport { isArray, getDivisors } from '../utils';\n\nexport type ToUnitsParams<TAmount, TOutput> = readonly [\n  dineroObject: Dinero<TAmount>,\n  transformer?: Transformer<TAmount, TOutput, readonly TAmount[]>\n];\n\nexport function toUnits<TAmount, TOutput>(calculator: Calculator<TAmount>) {\n  const getDivisorsFn = getDivisors(calculator);\n\n  return function toUnitsFn(\n    ...[dineroObject, transformer]: ToUnitsParams<TAmount, TOutput>\n  ) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n    const { power, integerDivide, modulo } = calculator;\n\n    const bases = isArray(currency.base) ? currency.base : [currency.base];\n    const divisors = getDivisorsFn(bases.map((base) => power(base, scale)));\n    const value = divisors.reduce<readonly TAmount[]>(\n      (amounts, divisor, index) => {\n        const amountLeft = amounts[index];\n\n        const quotient = integerDivide(amountLeft, divisor);\n        const remainder = modulo(amountLeft, divisor);\n\n        return [...amounts.filter((_, i) => i !== index), quotient, remainder];\n      },\n      [amount]\n    );\n\n    if (!transformer) {\n      return value;\n    }\n\n    return transformer({ value, currency });\n  };\n}\n","import { NON_DECIMAL_CURRENCY_MESSAGE } from '../checks';\nimport { assert } from '../helpers';\nimport type { Calculator, Dinero, Formatter, Transformer } from '../types';\nimport { absolute, computeBase, equal, isArray, lessThan } from '../utils';\n\nimport { toUnits } from './toUnits';\n\nexport type ToDecimalParams<TAmount, TOutput> = readonly [\n  dineroObject: Dinero<TAmount>,\n  transformer?: Transformer<TAmount, TOutput, string>\n];\n\nexport function toDecimal<TAmount, TOutput>(calculator: Calculator<TAmount>) {\n  const toUnitsFn = toUnits<TAmount, readonly TAmount[]>(calculator);\n  const computeBaseFn = computeBase(calculator);\n  const equalFn = equal(calculator);\n\n  return function toDecimalFn(\n    ...[dineroObject, transformer]: ToDecimalParams<TAmount, TOutput>\n  ) {\n    const { currency, scale } = dineroObject.toJSON();\n\n    const base = computeBaseFn(currency.base);\n    const zero = calculator.zero();\n    const ten = new Array(10).fill(null).reduce(calculator.increment, zero);\n\n    const isMultiBase = isArray(currency.base);\n    const isBaseTen = equalFn(calculator.modulo(base, ten), zero);\n    const isDecimal = !isMultiBase && isBaseTen;\n\n    assert(isDecimal, NON_DECIMAL_CURRENCY_MESSAGE);\n\n    const units = toUnitsFn(dineroObject);\n\n    const getDecimalFn = getDecimal(calculator, dineroObject.formatter);\n    const value = getDecimalFn(units, scale);\n\n    if (!transformer) {\n      return value;\n    }\n\n    return transformer({ value, currency });\n  };\n}\n\nfunction getDecimal<TAmount>(\n  calculator: Calculator<TAmount>,\n  formatter: Formatter<TAmount>\n) {\n  const absoluteFn = absolute(calculator);\n  const equalFn = equal(calculator);\n  const lessThanFn = lessThan(calculator);\n  const zero = calculator.zero();\n\n  return (units: readonly TAmount[], scale: TAmount) => {\n    const whole = formatter.toString(units[0]);\n    const fractional = formatter.toString(absoluteFn(units[1]));\n\n    const scaleNumber = formatter.toNumber(scale);\n    const decimal = `${whole}.${fractional.padStart(scaleNumber, '0')}`;\n\n    const leadsWithZero = equalFn(units[0], zero);\n    const isNegative = lessThanFn(units[1], zero);\n\n    // A leading negative zero is a special case because the `toString`\n    // formatter won't preserve its negative sign (since 0 === -0).\n    return leadsWithZero && isNegative ? `-${decimal}` : decimal;\n  };\n}\n","import type { Dinero } from '../types';\n\nexport function toSnapshot<TAmount>(dineroObject: Dinero<TAmount>) {\n  return dineroObject.toJSON();\n}\n","import type { Calculator, Dinero } from '../types';\nimport { computeBase, countTrailingZeros, equal, maximum } from '../utils';\n\nimport { transformScale } from './transformScale';\n\nexport type TrimScaleParams<TAmount> = readonly [dineroObject: Dinero<TAmount>];\n\nexport function trimScale<TAmount>(calculator: Calculator<TAmount>) {\n  const countTrailingZerosFn = countTrailingZeros(calculator);\n  const equalFn = equal(calculator);\n  const maximumFn = maximum(calculator);\n  const transformScaleFn = transformScale(calculator);\n  const computeBaseFn = computeBase(calculator);\n\n  return function trimScaleFn(...[dineroObject]: TrimScaleParams<TAmount>) {\n    const { amount, currency, scale } = dineroObject.toJSON();\n    const base = computeBaseFn(currency.base);\n\n    const trailingZerosLength = countTrailingZerosFn(amount, base);\n    const difference = calculator.subtract(scale, trailingZerosLength);\n    const newScale = maximumFn([difference, currency.exponent]);\n\n    if (equalFn(newScale, scale)) {\n      return dineroObject;\n    }\n\n    return transformScaleFn(dineroObject, newScale);\n  };\n}\n"],"names":["INVALID_AMOUNT_MESSAGE","INVALID_SCALE_MESSAGE","INVALID_RATIOS_MESSAGE","UNEQUAL_SCALES_MESSAGE","UNEQUAL_CURRENCIES_MESSAGE","NON_DECIMAL_CURRENCY_MESSAGE","assert","condition","message","Error","concat","createDinero","_ref","calculator","onCreate","_ref$formatter","formatter","toNumber","Number","toString","String","dinero","_ref2","amount","_ref2$currency","currency","code","base","exponent","_ref2$scale","scale","create","toJSON","ComparisonOperator","equal","subject","comparator","compare","EQ","lessThan","LT","absolute","equalFn","lessThanFn","zero","input","minusOne","decrement","multiply","isArray","maybeArray","Array","computeBase","reduce","acc","curr","countTrailingZeros","i","temp","modulo","integerDivide","increment","greaterThan","GT","greaterThanOrEqual","distribute","value","ratios","greaterThanFn","greaterThanOrEqualFn","one","total","a","b","add","remainder","shares","map","ratio","share","subtract","isPositive","isScaledAmount","hasOwnProperty","getAmountAndScale","_value$scale","getDivisors","bases","divisors","_","divisor","slice","_toConsumableArray","isEven","two","isHalf","absoluteFn","difference","lessThanOrEqual","maximum","values","minimum","sign","haveSameCurrency","dineroObjects","_dineroObjects","_toArray","firstDinero","otherDineros","_arrayLikeToArray","computeBaseFn","_firstDinero$toJSON","comparatorBase","every","d","_d$toJSON","subjectBase","down","factor","quotient","isInteger","halfAwayFromZero","signFn","isHalfFn","halfUp","up","halfDown","halfEven","isEvenFn","rounded","halfOdd","halfTowardsZero","isLessThanHalf","transformScale","transformScaleFn","_len","arguments","length","_key","dineroObject","newScale","_ref$","divide","_dineroObject$toJSON","isLarger","operation","_ref3","_slicedToArray","power","normalizeScale","maximumFn","convertScaleFn","_normalizeScale","highestScale","highest","current","_current$toJSON","unsafeAdd","augend","addend","_augend$toJSON","augendAmount","_addend$toJSON","addendAmount","safeAdd","normalizeFn","addFn","_len2","_key2","_normalizeFn","_normalizeFn2","newAugend","newAddend","unsafeAllocate","allocate","distributeFn","safeAllocate","allocateFn","ten","fill","hasRatios","scaledRatios","highestRatioScale","normalizedRatios","_ref4","hasOnlyPositiveRatios","_ref5","hasOneNonZeroRatio","some","_ref6","_dineroObject$toJSON2","unsafeCompare","compareFn","cmp","_dineroObjects$map","_dineroObjects$map2","subjectAmount","comparatorAmount","safeCompare","convert","convertFn","newCurrency","rates","rate","_getAmountAndScale","rateAmount","rateScale","haveSameAmount","_haveSameAmount","_equal","unsafeGreaterThan","gt","safeGreaterThan","unsafeGreaterThanOrEqual","gte","safeGreaterThanOrEqual","hasSubUnits","_hasSubUnits","isNegative","_isNegative","_isPositive","isZero","_isZero","unsafeLessThan","lt","safeLessThan","unsafeLessThanOrEqual","lessThanOrEqualFn","lte","safeLessThanOrEqual","unsafeMaximum","maxFn","max","_subject$toJSON","safeMaximum","normalizedDineroObjects","unsafeMinimum","minFn","min","safeMinimum","multiplyFn","multiplicand","multiplier","_multiplicand$toJSON","multiplierAmount","multiplierScale","unsafeSubtract","minuend","subtrahend","_minuend$toJSON","minuendAmount","_subtrahend$toJSON","subtrahendAmount","safeSubtract","subtractFn","newMinuend","newSubtrahend","toUnits","getDivisorsFn","toUnitsFn","transformer","amounts","index","amountLeft","filter","toDecimal","toDecimalFn","isMultiBase","isBaseTen","isDecimal","units","getDecimalFn","getDecimal","whole","fractional","scaleNumber","decimal","padStart","leadsWithZero","toSnapshot","trimScale","countTrailingZerosFn","trimScaleFn","trailingZerosLength"],"mappings":"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"}